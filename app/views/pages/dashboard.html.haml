= render "shared/header", resources: @resources, rocket: @rocket
.content
  %svg{:space => "preserve", :style => "enable-background:new 0 0 503.947 503.947;", :version => "1.1", :viewbox => "0 0 503.947 503.947", :x => "0px", :xmlns => "http://www.w3.org/2000/svg", "xmlns:xlink" => "http://www.w3.org/1999/xlink", :y => "0px"}
    %path.upgrade-button#hollow-pressure-vessel{:d => "M156.762,355.214c22.055,22.055,22.055,58.289,0,80.345c-22.055,22.055-87.04,50.806-109.095,28.751\r\n\ts6.695-87.04,28.751-109.095C98.473,333.159,134.313,333.159,156.762,355.214z", :style => "fill:#EFC75E;"}
    %path{:d => "M90.99,344.58v2.363c0,40.96,33.477,74.437,74.437,74.437h1.575\r\n\tc11.028-21.268,7.483-48.049-10.634-66.166C139.039,337.491,112.258,333.946,90.99,344.58z", :style => "fill:#DEB957;"}
    %path.upgrade-button#fins{:d => "M272.553,231.546c67.348,67.348,80.738,163.052,16.935,226.855l-30.326,30.326\r\n\tc-63.803,63.803-19.692-89.403-87.04-156.751s-220.948-22.843-156.751-87.04l30.326-30.326\r\n\tC109.501,150.808,205.205,164.199,272.553,231.546L272.553,231.546z", :style => "fill:#F26C4F;"}
    %path.upgrade-button#tube{:d => "M495.47,8.629c20.48,20.48,11.422,150.449-114.215,276.48\r\n\tc-81.92,81.526-133.514,110.277-133.514,110.277c-54.745,37.022-81.132,11.815-115.791-22.843s-60.258-61.046-22.843-115.791\r\n\tc0,0,29.145-51.988,110.671-133.908C345.414-2.792,474.99-12.244,495.47,8.629L495.47,8.629z", :style => "fill:#F4F0D3;"}
    %path{:d => "M269.402,377.663c-57.108,38.203-84.677,12.209-120.517-23.631\r\n\tc-36.234-36.234-62.622-63.409-23.631-120.517l5.908-9.452c-15.36,20.874-22.055,32.689-22.055,32.689\r\n\tc-37.415,54.745-11.815,81.132,22.843,115.791s61.046,59.471,115.791,22.843c0,0,24.418-13.785,66.56-48.837\r\n\tC285.55,368.605,269.402,377.663,269.402,377.663z", :style => "fill:#E8E4C8;"}
    %path{:d => "M363.531,140.568c19.298,19.298,19.298,50.412,0,69.711c-19.298,19.298-50.412,19.298-69.711,0\r\n\tc-19.298-19.298-19.298-50.412,0-69.711S344.627,121.269,363.531,140.568z", :style => "fill:#8BA0AB;"}
    %path.upgrade-button#fins{:d => "M249.71,262.66c9.846,9.846-9.058,44.898-57.108,92.948s-77.194,61.046-87.04,50.806\r\n\tc-9.846-9.846,2.757-38.991,50.806-87.04C204.811,271.325,239.47,252.42,249.71,262.66z", :style => "fill:#F26C4F;"}
    %path{:d => "M328.873,137.811c9.846,0,19.298,3.938,26.388,11.028c7.089,7.089,11.028,16.542,11.028,26.388\r\n\ts-3.938,19.298-11.028,26.388c-7.089,7.089-16.542,11.028-26.388,11.028s-19.298-3.938-26.388-11.028\r\n\tc-7.089-7.089-11.028-16.542-11.028-26.388s3.938-19.298,11.028-26.388C309.574,141.749,319.027,137.811,328.873,137.811\r\n\t M328.873,125.996c-12.603,0-25.206,4.726-34.658,14.572c-19.298,19.298-19.298,50.412,0,69.711\r\n\tc9.452,9.452,22.055,14.572,34.658,14.572s25.206-4.726,34.658-14.572c19.298-19.298,19.298-50.412,0-69.711\r\n\tC354.079,130.722,341.476,125.996,328.873,125.996z", :style => "fill:#324D5B;"}
    %path.upgrade-button#nose{:d => "M374.953,18.476c3.545,26.388,17.723,54.351,40.96,77.588c20.48,20.086,44.111,33.477,67.348,38.991\r\n\tC509.254,70.463,507.285,20.839,495.47,8.629C484.048-3.186,436.787-5.155,374.953,18.476z", :style => "fill:#F26C4F;"}
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
    %g
  - @rocket.rocket_parts.each do |rocket_part|
    %div{id: "upgrade-panel-#{rocket_part.part.name.downcase.gsub(" ", "-")}", class:'upgrade-panel'}
      .panel-header
        .title="#{rocket_part.part.name} - Level #{rocket_part.level}"
        .panel-dismiss
          %i{class:"far fa-times-circle"}
      .panel-content
        .stat-block
          - @stats.each do |stat|
            %div{class: "stat stat-#{stat.name.downcase}"}
              .name
                = stat.name
              .value
                = "#{PartStat.find_by(stat: stat, part: rocket_part.part).ratio}%"
        .cost-block
          - @resources.each do |resource|
            %div{class: "part-upgrade part-upgrade-#{resource.name.downcase}"}
              .icon
                %img{alt: "#{resource.name}", class: "ressource-icon", :src => "/images/ressources/#{resource.name}.png", :title => "#{resource.name}"}/
              .cost
                = PartCost.find_by(part: rocket_part.part, resource: resource).cost
      .panel-footer
        - if can? :level_up, rocket_part
          %button{id: "#{rocket_part.id}", class: "part-upgrade-button"}="Upgrade"
  = render "shared/footer", resources: @resources, rocket: @rocket
